{"id":"st-1fl","title":"Record add/set/show","description":"Commands: add (with --set), set (single and --col multi), show (with --json, --with-files, --history). Basic CRUD operations.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:40:42.429567776Z","created_by":"dev","updated_at":"2026-01-08T20:45:27.501367097Z","closed_at":"2026-01-08T20:45:27.501367097Z","close_reason":"Closed","labels":["phase:2-core-cli"],"dependencies":[{"issue_id":"st-1fl","depends_on_id":"st-w3r","type":"blocks","created_at":"2026-01-08T19:42:37.925384149Z","created_by":"dev"}]}
{"id":"st-1n7","title":"List and filter","description":"Command: list with --where, --columns, --tree, --json, --deleted, --all flags. Tree rendering for hierarchy. Filter by SQL WHERE clause.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:40:52.023564355Z","created_by":"dev","updated_at":"2026-01-08T20:53:59.629168651Z","closed_at":"2026-01-08T20:53:59.629168651Z","close_reason":"Closed","labels":["phase:3-schema-query"],"dependencies":[{"issue_id":"st-1n7","depends_on_id":"st-1fl","type":"blocks","created_at":"2026-01-08T19:42:39.585866816Z","created_by":"dev"}]}
{"id":"st-1w7","title":"Feature: real-time dashboard capabilities","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-12T17:39:46.598301698Z","created_by":"dev","updated_at":"2026-01-12T17:39:46.598301698Z","comments":[{"id":17,"issue_id":"st-1w7","author":"dev","text":"**Source**: feedback/feedback.md\n\n**Proposed Solution**:\n```bash\nstash dashboard --fields \"confidence_level,research_file\" --refresh 30\n```\n\n**Impact**: Real-time visibility into stash data during workflows\n\n**Note**: This is a wishlist item - lower priority than core CLI features","created_at":"2026-01-12T17:40:16Z"}]}
{"id":"st-24a","title":"Enhance command help with AI agent examples","description":"Update existing command help text to include AI-focused examples: template patterns with placeholders, automation-friendly examples, batch processing patterns. Commands to update: add, set, query, list, bulk-set, search. See feedback/help-text-feedback.md","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-12T18:40:04.144537904Z","created_by":"dev","updated_at":"2026-01-12T21:01:24.148995845Z","closed_at":"2026-01-12T21:01:24.148995845Z","close_reason":"commit e8f77ee: Add AI agent examples to add, set, query, list, bulk-set, search commands"}
{"id":"st-2vi","title":"Feature: stash search command for simple lookups","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-12T17:39:03.904448632Z","created_by":"dev","updated_at":"2026-01-12T20:38:57.971227023Z","closed_at":"2026-01-12T20:38:57.971227023Z","close_reason":"commit a728fa6: Add search command with --in flag for column filtering","comments":[{"id":9,"issue_id":"st-2vi","author":"dev","text":"**Source**: feedback/feedback.md\n\n**Problem**: Only SQL queries available - overkill for basic lookups:\n```bash\nstash query \"SELECT * FROM fpm WHERE company_name LIKE '%disney%'\"\n```\n\n**Proposed Solution**:\n```bash\nstash search \"disney\"  # Full-text search\nstash search \"disney\" --in company_name  # Field-specific\nstash search \"disney\" --fuzzy  # Fuzzy matching\n```\n\n**Impact**: SQL is overkill for simple lookups","created_at":"2026-01-12T17:39:29Z"}]}
{"id":"st-3eq","title":"File attachments","description":"Command: file (with --content, --from). Create files/ directory. Store filename in column. Support --with-files in show command.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:41:03.093691456Z","created_by":"dev","updated_at":"2026-01-08T20:53:59.820474166Z","closed_at":"2026-01-08T20:53:59.820474166Z","close_reason":"Closed","labels":["phase:4-advanced-records"],"dependencies":[{"issue_id":"st-3eq","depends_on_id":"st-1fl","type":"blocks","created_at":"2026-01-08T19:42:47.621630035Z","created_by":"dev"}]}
{"id":"st-3ro","title":"Feature: --where support for NULL/empty values","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-09T13:56:43.023483297Z","created_by":"dev","updated_at":"2026-01-09T14:23:10.29017486Z","closed_at":"2026-01-09T14:23:10.29017486Z","close_reason":"Implemented IS NULL/IS NOT NULL/IS EMPTY/IS NOT EMPTY support in --where clause","labels":["component:cli"],"comments":[{"id":3,"issue_id":"st-3ro","author":"dev","text":"**Use Case**\n\nFind records where a column is empty/unset:\n```bash\nstash list --where \"further_research IS NULL\"\nstash list --where \"further_research IS EMPTY\"\n```\n\n**Current Workaround**\n\nUse raw SQL:\n```bash\nstash query \"SELECT id, name FROM \u003ctable\u003e WHERE field IS NULL OR field = ''\"\n```\n\n**Proposed Syntax Options**\n\n1. `field IS NULL` - matches SQL\n2. `field IS EMPTY` - matches NULL or empty string\n3. `field=` with special NULL handling\n\n**Acceptance Criteria**\n- [ ] Support IS NULL / IS NOT NULL in --where\n- [ ] Consider IS EMPTY for NULL-or-empty-string matching\n- [ ] Update --help with new syntax\n- [ ] Update stash prime with examples","created_at":"2026-01-09T13:56:54Z"},{"id":4,"issue_id":"st-3ro","author":"dev","text":"**Refined Acceptance Criteria**\n\nParser changes (`internal/cli/list.go`):\n- [ ] Support `field IS NULL` syntax\n- [ ] Support `field IS NOT NULL` syntax\n- [ ] Support `field IS EMPTY` (matches NULL or empty string)\n- [ ] Support `field IS NOT EMPTY` (matches non-NULL and non-empty)\n\nStorage changes (`internal/storage/sqlite.go`):\n- [ ] `IS NULL` generates `\"field\" IS NULL`\n- [ ] `IS NOT NULL` generates `\"field\" IS NOT NULL`\n- [ ] `IS EMPTY` generates `(\"field\" IS NULL OR \"field\" = '')`\n- [ ] `IS NOT EMPTY` generates `(\"field\" IS NOT NULL AND \"field\" != '')`\n\nDocumentation:\n- [ ] Update `--help` text in list.go (lines 49-56)\n- [ ] Update stash prime with examples\n\n**Test Cases** (add to `internal/cli/list_test.go`):\n\n```go\n// Parser tests\n{\"field IS NULL\", WhereCondition{Field: \"field\", Operator: \"IS NULL\", Value: \"\"}, false},\n{\"field IS NOT NULL\", WhereCondition{Field: \"field\", Operator: \"IS NOT NULL\", Value: \"\"}, false},\n{\"field IS EMPTY\", WhereCondition{Field: \"field\", Operator: \"IS EMPTY\", Value: \"\"}, false},\n{\"field IS NOT EMPTY\", WhereCondition{Field: \"field\", Operator: \"IS NOT EMPTY\", Value: \"\"}, false},\n// Case insensitivity\n{\"field is null\", WhereCondition{Field: \"field\", Operator: \"IS NULL\", Value: \"\"}, false},\n{\"Field Is Empty\", WhereCondition{Field: \"Field\", Operator: \"IS EMPTY\", Value: \"\"}, false},\n```\n\nIntegration tests:\n- [ ] Create records with NULL field, empty string field, and populated field\n- [ ] Verify `--where \"field IS NULL\"` returns only NULL records\n- [ ] Verify `--where \"field IS EMPTY\"` returns NULL and empty string records\n- [ ] Verify `--where \"field IS NOT EMPTY\"` excludes both NULL and empty","created_at":"2026-01-09T14:13:13Z"}]}
{"id":"st-3um","title":"Core model types","description":"Record, Column, Stash structs with validation. ID generation (base36 4-char). SHA-256 hash calculation (first 12 chars). Prefix validation (3-5 chars). Case-insensitive column matching.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:40:31.16053809Z","created_by":"dev","updated_at":"2026-01-08T20:05:47.057319746Z","closed_at":"2026-01-08T20:05:47.057319746Z","close_reason":"Core model types complete: Record, Column, Stash structs, ID generation (base36), hash calculation (SHA-256 12-char), prefix validation, case-insensitive columns. All tests passing.","labels":["phase:1-foundation"],"dependencies":[{"issue_id":"st-3um","depends_on_id":"st-mir","type":"blocks","created_at":"2026-01-08T19:42:36.964938865Z","created_by":"dev"}]}
{"id":"st-3vt","title":"Feature: stash count command","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-10T08:41:29.364841368Z","created_by":"dev","updated_at":"2026-01-10T08:43:21.464103816Z","closed_at":"2026-01-10T08:43:21.464103816Z","close_reason":"Added stash count command with --where, --all, --deleted, --json flags","comments":[{"id":5,"issue_id":"st-3vt","author":"dev","text":"**Use Case**\n\nCount records matching criteria without fetching all data:\n```bash\nstash count                              # Total records\nstash count --where \"status=pending\"     # Filtered count\nstash count --where \"notes IS EMPTY\"     # Using IS NULL/EMPTY\n```\n\n**Acceptance Criteria**\n- [ ] Add `stash count` command\n- [ ] Support --where filtering (reuse existing parser)\n- [ ] Support --all flag to include children\n- [ ] Support --deleted flag to include deleted\n- [ ] Output just the number (for scripting)\n- [ ] Add --json flag for `{\"count\": N}` output","created_at":"2026-01-10T08:41:37Z"}]}
{"id":"st-4a4","title":"Test infrastructure","description":"Test helpers: runStash(), setupStash(), showRecord(). Test fixtures in tests/fixtures/. CI setup with GitHub Actions. Coverage reporting.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:41:37.480013741Z","created_by":"dev","updated_at":"2026-01-08T20:14:59.651721326Z","closed_at":"2026-01-08T20:14:59.651721326Z","close_reason":"Closed","labels":["phase:7-testing"],"dependencies":[{"issue_id":"st-4a4","depends_on_id":"st-mir","type":"blocks","created_at":"2026-01-08T19:42:57.971893835Z","created_by":"dev"}]}
{"id":"st-51f","title":"Import/Export","description":"Commands: import (CSV with --column, --confirm, --dry-run), export (with --format csv|json, --where, --include-deleted). Column detection from headers.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:41:15.644681436Z","created_by":"dev","updated_at":"2026-01-08T21:17:11.27234066Z","closed_at":"2026-01-08T21:17:11.27234066Z","close_reason":"Closed","labels":["phase:5-integration"],"dependencies":[{"issue_id":"st-51f","depends_on_id":"st-tne","type":"blocks","created_at":"2026-01-08T19:42:49.091955943Z","created_by":"dev"},{"issue_id":"st-51f","depends_on_id":"st-1n7","type":"blocks","created_at":"2026-01-08T19:42:49.147303072Z","created_by":"dev"}]}
{"id":"st-55k","title":"Soft delete workflow","description":"Commands: delete (with --cascade, --yes), restore (with --cascade), purge (with --before, --id, --all, --dry-run, --yes). Set _deleted_at/_deleted_by fields.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:41:01.052735051Z","created_by":"dev","updated_at":"2026-01-08T20:53:59.754083369Z","closed_at":"2026-01-08T20:53:59.754083369Z","close_reason":"Closed","labels":["phase:4-advanced-records"],"dependencies":[{"issue_id":"st-55k","depends_on_id":"st-1fl","type":"blocks","created_at":"2026-01-08T19:42:47.560895942Z","created_by":"dev"}]}
{"id":"st-5ad","title":"Handoff: Stash implementation - foundation phase complete","description":"## Goal\nImplement stash - a record-centric structured data store for AI agents (Go CLI).\n\n## What Was Done\n\n### Specs Reviewed \u0026 Enhanced\n- Created `usecases/` directory with YAML files (stash.yaml, records.yaml, columns.yaml, query.yaml, import.yaml, sync.yaml)\n- Created `usecases/SCHEMA.md` documenting UCDD format\n- Updated `CLAUDE.md` with development discipline section (UCDD workflow, drift review, test naming)\n\n### Beads Completed\n1. **st-mir**: Project scaffolding\n   - Go module: github.com/user/stash\n   - Directory structure: cmd/stash, internal/{cli,config,context,daemon,model,output,storage}, tests/\n   - Cobra root command with global flags: --json, --stash, --actor, --quiet, --verbose, --no-daemon\n   - Version command\n\n2. **st-3um**: Core model types\n   - `internal/model/errors.go` - All error types\n   - `internal/model/record.go` - Record struct with hash calculation (SHA-256, 12-char), JSON marshal/unmarshal\n   - `internal/model/column.go` - Column struct, case-insensitive matching, reserved name validation\n   - `internal/model/stash.go` - Stash struct, prefix validation (3-5 chars)\n   - `internal/model/id.go` - ID generation (base36 4-char), hierarchy helpers\n   - All tests passing (70+ tests)\n\n### Beads Created\n- **st-5yo**: Test infrastructure helpers (open)\n\n## What's Ready Next\n`bd ready` shows:\n1. **st-qhm**: Storage layer (JSONL + SQLite) - bigger, critical path\n2. **st-gvm**: Context detection (actor/branch resolution) - smaller\n3. **st-4a4**: Test infrastructure\n4. **st-5yo**: Test infrastructure helpers\n\n## Key Files\n```\ncmd/stash/main.go\ninternal/cli/root.go\ninternal/cli/version.go\ninternal/model/errors.go\ninternal/model/record.go + record_test.go\ninternal/model/column.go + column_test.go\ninternal/model/stash.go + stash_test.go\ninternal/model/id.go + id_test.go\nusecases/*.yaml\n```\n\n## Resume Command\n```bash\nbd ready                    # See unblocked work\nbd show qhm                 # Storage layer details\nbd show gvm                 # Context detection details\ngo test ./...               # Verify tests still pass\n./stash --help              # Verify CLI works\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T20:07:38.411994079Z","created_by":"dev","updated_at":"2026-01-08T20:18:11.881899441Z","closed_at":"2026-01-08T20:18:11.881899441Z","close_reason":"Closed","labels":["handoff","main"]}
{"id":"st-5ih","title":"Feature: query templates for common patterns","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-12T17:39:40.743135925Z","created_by":"dev","updated_at":"2026-01-13T09:52:54.954777548Z","closed_at":"2026-01-13T09:52:54.954777548Z","close_reason":"commit 04a0499: Add query templates","comments":[{"id":10,"issue_id":"st-5ih","author":"dev","text":"**Source**: feedback/feedback.md\n\n**Proposed Solution**:\n```bash\nstash template save \"high-priority\" \"SELECT * FROM fpm WHERE confidence_level='High' AND research_file IS NULL\"\nstash template run \"high-priority\"\nstash template list\n```\n\n**Impact**: Save and reuse common query patterns","created_at":"2026-01-12T17:40:08Z"}]}
{"id":"st-5xh","title":"Add 'stash help json' command","description":"Create dedicated help topic for JSON schema documentation. Should include: complete JSON schema for all commands, system fields (_id, _created_at, _created_by, _updated_at, _updated_by), parsing examples with jq/Python, error response formats. See feedback/help-text-feedback.md","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-12T18:40:03.390332102Z","created_by":"dev","updated_at":"2026-01-12T21:01:21.913743619Z","closed_at":"2026-01-12T21:01:21.913743619Z","close_reason":"commit e8f77ee: Add 'stash help-topic json' command with JSON schema docs"}
{"id":"st-5yo","title":"Test infrastructure helpers","description":"Create test helper functions for UCDD tests:\n\n- runStash(args...) - Execute stash CLI and capture stdout/stderr/exit\n- setupStash(t, name, prefix, flags...) - Create temporary stash for test\n- showRecord(t, id) - Parse record from stash show --json\n- readConfig(t, path) - Parse config.json\n- writeCSV(t, path, content) - Create test CSV file\n- parseJSON(content) - Parse JSON output to []map\n\nReference: specs/tests.md lines 989-1108","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:53:53.264280276Z","created_by":"dev","updated_at":"2026-01-08T20:14:59.715152596Z","closed_at":"2026-01-08T20:14:59.715152596Z","close_reason":"Closed"}
{"id":"st-64v","title":"Feature: data validation with column constraints","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-12T17:39:41.463758964Z","created_by":"dev","updated_at":"2026-01-13T09:52:54.895373619Z","closed_at":"2026-01-13T09:52:54.895373619Z","close_reason":"commit 04a0499: Add data validation with column constraints","comments":[{"id":11,"issue_id":"st-64v","author":"dev","text":"**Source**: feedback/feedback.md\n\n**Proposed Solution**:\n```bash\nstash validate --rules validation.json\nstash column add email --validate \"email_format\"\nstash column add confidence_level --enum \"High,Medium,Low\"\n```\n\n**Impact**: Ensure data quality at input time","created_at":"2026-01-12T17:40:09Z"}]}
{"id":"st-6kd","title":"Feature: built-in reporting templates","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-12T17:39:45.709495111Z","created_by":"dev","updated_at":"2026-01-12T17:39:45.709495111Z","comments":[{"id":16,"issue_id":"st-6kd","author":"dev","text":"**Source**: feedback/feedback.md\n\n**Proposed Solution**:\n```bash\nstash report --template \"completion-stats\" --output report.html\n```\n\n**Impact**: Generate formatted reports from stash data","created_at":"2026-01-12T17:40:15Z"}]}
{"id":"st-6ul","title":"Sync command","description":"Command: sync with --rebuild, --flush, --status, --from-main. JSONL to SQLite synchronization. Full rebuild capability.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:41:16.569335516Z","created_by":"dev","updated_at":"2026-01-08T20:29:21.980242465Z","closed_at":"2026-01-08T20:29:21.980242465Z","close_reason":"Closed","labels":["phase:5-integration"],"dependencies":[{"issue_id":"st-6ul","depends_on_id":"st-qhm","type":"blocks","created_at":"2026-01-08T19:42:49.20490449Z","created_by":"dev"}]}
{"id":"st-7og","title":"CLAUDE.md onboarding snippet missing column setup step","description":"## Problem\n\nWhen Claude Code uses stash in a new project, it doesn't know that columns must be defined before adding records. This leads to the error:\n\n```\nError: cannot add record - stash has no columns defined\nHint: use `stash column add \u003cname\u003e` to add a column first\n```\n\nAlso, column naming constraints (no hyphens, must use underscores) aren't documented.\n\n## Expected\n\nThe CLAUDE.md onboarding snippet should include:\n1. Column setup step before adding records\n2. Column naming rules (letters, numbers, underscores only)\n3. Example workflow: init → columns → add records\n\n## Affected Files\n\n- `internal/cli/init_claude.go` - `generateOnboardingSnippet()` function\n- `internal/cli/onboard.go` - similar snippet\n\n## Suggested Fix\n\nUpdate the Quick Reference section to show:\n\n```bash\n# 1. Initialize stash\nstash init mydata --prefix dat-\n\n# 2. Define columns (names: letters, numbers, underscores only)\nstash column add company_name --primary\nstash column add status\nstash column add notes\n\n# 3. Add records\nstash add \"Acme Corp\" --set status=active\n```","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T01:46:29.61967684Z","created_by":"dev","updated_at":"2026-01-13T08:59:57.933110175Z","closed_at":"2026-01-13T08:59:57.933110175Z","close_reason":"commit a03e691: Fix CLAUDE.md onboarding snippet - added numbered workflow and column naming rules","labels":["bug"]}
{"id":"st-7wz","title":"Feature: bulk set operations with --where clause","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-12T17:39:02.355892206Z","created_by":"dev","updated_at":"2026-01-12T20:38:59.776518136Z","closed_at":"2026-01-12T20:38:59.776518136Z","close_reason":"commit a728fa6: Add bulk-set command with --where and --set flags","comments":[{"id":7,"issue_id":"st-7wz","author":"dev","text":"**Source**: feedback/feedback.md\n\n**Problem**: No batch updates - user had to script workarounds:\n```bash\nstash query \"SELECT id FROM fpm WHERE confidence_level='High'\" | while read id; do\n    stash set $id priority=\"urgent\"\ndone\n```\n\n**Proposed Solution**:\n```bash\nstash bulk-set --where \"confidence_level='High'\" --set priority=\"urgent\"\n```\n\n**Impact**: Made bulk updates tedious for 71+ records","created_at":"2026-01-12T17:39:27Z"}]}
{"id":"st-85u","title":"Daemon process","description":"Commands: daemon start/stop/restart/status/logs. PID file management. Graceful shutdown. Log rotation (max 10MB). Stale PID detection.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:41:25.858090544Z","created_by":"dev","updated_at":"2026-01-08T20:28:53.318438257Z","closed_at":"2026-01-08T20:28:53.318438257Z","close_reason":"Closed","labels":["phase:6-daemon"],"dependencies":[{"issue_id":"st-85u","depends_on_id":"st-qhm","type":"blocks","created_at":"2026-01-08T19:42:51.76071058Z","created_by":"dev"}]}
{"id":"st-8bv","title":"Record locking for multi-agent coordination","description":"Add record locking to prevent concurrent update conflicts. Commands: 'stash lock \u003cid\u003e --agent NAME --timeout SEC', 'stash unlock \u003cid\u003e'. Should track which agent has the lock and auto-expire. See feedback/help-text-feedback.md","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-12T18:40:05.835939782Z","created_by":"dev","updated_at":"2026-01-13T08:59:58.694119962Z","closed_at":"2026-01-13T08:59:58.694119962Z","close_reason":"commit a03e691: Add record locking with lock/unlock/locks commands"}
{"id":"st-8jf","title":"Status tracking for processing visibility","description":"Add status tracking to show what records are being processed. Command: 'stash status --processing'. Should show records currently being worked on, which agent claimed them, and duration. See feedback/help-text-feedback.md","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-12T18:40:06.58001536Z","created_by":"dev","updated_at":"2026-01-13T08:59:59.606731012Z","closed_at":"2026-01-13T08:59:59.606731012Z","close_reason":"commit a03e691: Add status command for processing visibility"}
{"id":"st-8x1","title":"Structured JSON error responses","description":"Add machine-parseable error responses when --json flag is used. Should include: success boolean, error_code, error_message, suggestion field, relevant context (record_id, field name, etc). See feedback/help-text-feedback.md","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-12T18:40:05.071127481Z","created_by":"dev","updated_at":"2026-01-12T21:01:24.927662889Z","closed_at":"2026-01-12T21:01:24.927662889Z","close_reason":"commit e8f77ee: Add structured JSON error responses with error codes and details"}
{"id":"st-9w2","title":"Unit tests","description":"Tests for internal packages: model/, storage/, context/, output/. ID generation, hash calculation, JSONL parsing, SQLite operations.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:41:49.240114023Z","created_by":"dev","updated_at":"2026-01-08T21:17:11.395231172Z","closed_at":"2026-01-08T21:17:11.395231172Z","close_reason":"Closed","labels":["phase:7-testing"],"dependencies":[{"issue_id":"st-9w2","depends_on_id":"st-4a4","type":"blocks","created_at":"2026-01-08T19:42:58.030506831Z","created_by":"dev"}]}
{"id":"st-c56","title":"Edge case tests","description":"~113 edge case tests from tests.md: EC-ST-*, EC-COL-*, EC-REC-*, EC-QRY-*, EC-IMP-*, EC-SYN-*, EC-DMN-*. SQL injection, unicode, boundaries.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:41:51.220613605Z","created_by":"dev","updated_at":"2026-01-08T19:41:51.220613605Z","labels":["phase:7-testing"],"dependencies":[{"issue_id":"st-c56","depends_on_id":"st-yyh","type":"blocks","created_at":"2026-01-08T19:42:58.149581765Z","created_by":"dev"}]}
{"id":"st-cpc","title":"Feature: auto-column creation with --auto-create flag","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-12T17:39:01.628818005Z","created_by":"dev","updated_at":"2026-01-12T20:39:00.606302968Z","closed_at":"2026-01-12T20:39:00.606302968Z","close_reason":"commit a728fa6: Add --auto-create flag to set command","comments":[{"id":6,"issue_id":"st-cpc","author":"dev","text":"**Source**: feedback/feedback.md\n\n**Problem**: Currently adding a new field requires two commands:\n```bash\nstash column add new_field\nstash set fpm-123 new_field=\"value\"\n```\n\n**Proposed Solution**:\n- Add `--auto-create` flag to `stash set`\n- Optionally add global config `auto-create-columns=true`\n\n**Impact**: Eliminates constant friction when schema evolves","created_at":"2026-01-12T17:39:26Z"}]}
{"id":"st-ezr","title":"Feature: import enhancements with update modes","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-12T17:39:42.940142428Z","created_by":"dev","updated_at":"2026-01-12T17:39:42.940142428Z","comments":[{"id":13,"issue_id":"st-ezr","author":"dev","text":"**Source**: feedback/feedback.md\n\n**Proposed Solution**:\n```bash\nstash import companies.csv --update-existing --dry-run\nstash import companies.csv --key-column id --upsert\n```\n\n**Impact**: Support updating existing records during import, not just inserting new ones","created_at":"2026-01-12T17:40:11Z"}]}
{"id":"st-f84","title":"Feature: multi-agent coordination and locking","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-12T17:39:44.831399612Z","created_by":"dev","updated_at":"2026-01-12T21:03:33.864999148Z","closed_at":"2026-01-12T21:03:33.864999148Z","close_reason":"Duplicate of st-8bv (record locking)","comments":[{"id":15,"issue_id":"st-f84","author":"dev","text":"**Source**: feedback/feedback.md\n\n**Problem**: Multiple agents updating same dataset without coordination\n\n**Proposed Solution**:\n```bash\nstash lock fpm-123 --agent agent-1 --timeout 300\nstash set fpm-123 status=\"processing\" --if-locked\nstash unlock fpm-123 --agent agent-1\n```\n\n**Impact**: Prevent conflicts in multi-agent workflows (user had 5+ concurrent agents)","created_at":"2026-01-12T17:40:13Z"}]}
{"id":"st-gvm","title":"Context detection","description":"Actor resolution: --actor flag -\u003e $STASH_ACTOR -\u003e $USER -\u003e 'unknown'. Git branch detection via git rev-parse. Graceful fallback if not in git repo.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:40:42.651246068Z","created_by":"dev","updated_at":"2026-01-08T20:14:29.659467229Z","closed_at":"2026-01-08T20:14:29.659467229Z","close_reason":"Closed","labels":["phase:2-core-cli"],"dependencies":[{"issue_id":"st-gvm","depends_on_id":"st-3um","type":"blocks","created_at":"2026-01-08T19:42:37.984054455Z","created_by":"dev"}]}
{"id":"st-h2v","title":"Docs: stash onboarding missing column setup step","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T09:51:22.366846988Z","created_by":"dev","updated_at":"2026-01-09T11:44:04.290760481Z","closed_at":"2026-01-09T11:44:04.290760481Z","close_reason":"Added Getting Started section to stash --help and column requirement to stash add --help. Also notes underscore requirement for column names.","labels":["component:cli","context-gap"],"comments":[{"id":2,"issue_id":"st-h2v","author":"dev","text":"**Problem**\n\nWhen using stash for the first time, Claude Code attempted:\n```\nstash add \"Share Focus Limited\" --set status=pending --set industry=\"\" ...\n```\n\nGot error:\n```\nError: cannot add record - stash has no columns defined\nHint: use \\`stash column add \u003cname\u003e\\` to add a column first\n```\n\nClaude then had to discover:\n1. Columns must be defined before adding records\n2. Column names must use underscores (not hyphens)\n\n**Expected**\n\nOnboarding docs should clearly show the column-first workflow:\n1. Create stash\n2. Define columns\n3. Then add records\n\n**Affected Docs**\n- CLI help text (stash --help, stash add --help)\n- Any getting-started documentation\n\n**Acceptance Criteria**\n- [ ] Document column-first workflow in help text\n- [ ] Show example workflow in stash --help","created_at":"2026-01-09T09:51:33Z"}]}
{"id":"st-hti","title":"Feature: field statistics and analysis commands","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-12T17:39:42.174327305Z","created_by":"dev","updated_at":"2026-01-12T17:39:42.174327305Z","comments":[{"id":12,"issue_id":"st-hti","author":"dev","text":"**Source**: feedback/feedback.md\n\n**Proposed Solution**:\n```bash\nstash stats confidence_level  # Show distribution\nstash stats --missing  # Show fields with NULL values\nstash analyze --duplicates company_name  # Find potential duplicates\n```\n\n**Impact**: Quick data quality insights without writing SQL","created_at":"2026-01-12T17:40:10Z"}]}
{"id":"st-hyn","title":"Hierarchy support","description":"Support --parent flag in add. Command: children. Tree display in list --tree. Parent validation. Sequential child IDs (parent.1, parent.2).","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:41:04.239748842Z","created_by":"dev","updated_at":"2026-01-08T21:17:11.211936442Z","closed_at":"2026-01-08T21:17:11.211936442Z","close_reason":"Closed","labels":["phase:4-advanced-records"],"dependencies":[{"issue_id":"st-hyn","depends_on_id":"st-1fl","type":"blocks","created_at":"2026-01-08T19:42:47.682692284Z","created_by":"dev"}]}
{"id":"st-k0y","title":"Query and history","description":"Commands: query (SELECT-only SQL), history (with --limit, --since, --by, --json). Block INSERT/UPDATE/DELETE in query command.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:40:53.160533753Z","created_by":"dev","updated_at":"2026-01-08T20:53:59.690061153Z","closed_at":"2026-01-08T20:53:59.690061153Z","close_reason":"Closed","labels":["phase:3-schema-query"],"dependencies":[{"issue_id":"st-k0y","depends_on_id":"st-1n7","type":"blocks","created_at":"2026-01-08T19:42:39.644125966Z","created_by":"dev"}]}
{"id":"st-l57","title":"Add 'stash help agents' command","description":"Create dedicated help topic for AI agent workflows. Should include: JSON output patterns and parsing, bulk processing workflows (using new bulk-set), multi-agent coordination guidelines, error handling for automation, performance considerations. See feedback/help-text-feedback.md","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-12T18:40:01.755781159Z","created_by":"dev","updated_at":"2026-01-12T21:01:23.221422471Z","closed_at":"2026-01-12T21:01:23.221422471Z","close_reason":"commit e8f77ee: Add 'stash help-topic agents' command with AI workflow patterns"}
{"id":"st-mir","title":"Project scaffolding","description":"Go module init, directory structure (cmd/, internal/), Cobra root command with global flags (--json, --stash, --actor, --quiet, --verbose, --no-daemon)","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:40:30.314873173Z","created_by":"dev","updated_at":"2026-01-08T20:01:56.982002308Z","closed_at":"2026-01-08T20:01:56.982002308Z","close_reason":"Scaffolding complete: Go module, directory structure, Cobra with global flags","labels":["phase:1-foundation"]}
{"id":"st-ppi","title":"Feature: CSV export with column selection","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-12T17:39:03.103756415Z","created_by":"dev","updated_at":"2026-01-12T20:38:58.752499016Z","closed_at":"2026-01-12T20:38:58.752499016Z","close_reason":"commit a728fa6: Add --csv, --no-headers, --columns flags to query command","comments":[{"id":8,"issue_id":"st-ppi","author":"dev","text":"**Source**: feedback/feedback.md\n\n**Problem**: Query results lack formatting options for scripting integration\n\n**Proposed Solution**:\n```bash\nstash export --format csv --columns \"id,company_name,confidence_level\"\nstash query \"...\" --no-headers --csv\n```\n\n**Impact**: Essential for scripting and data pipeline integration","created_at":"2026-01-12T17:39:28Z"}]}
{"id":"st-qhm","title":"Storage layer","description":"JSONL read/write (append-only). SQLite schema with dynamic columns. Sync algorithm. Indexes on parent_id, deleted_at, hash, branch, updated_at.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:40:31.978466271Z","created_by":"dev","updated_at":"2026-01-08T20:17:30.489516088Z","closed_at":"2026-01-08T20:17:30.489516088Z","close_reason":"Closed","labels":["phase:1-foundation"],"dependencies":[{"issue_id":"st-qhm","depends_on_id":"st-3um","type":"blocks","created_at":"2026-01-08T19:42:37.024259173Z","created_by":"dev"}]}
{"id":"st-sz0","title":"Doctor and repair","description":"Commands: doctor (with --fix, --deep, --json, --yes), repair (with --dry-run, --source, --clean-orphans, --rehash). Health checks and auto-fix.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:41:17.581882414Z","created_by":"dev","updated_at":"2026-01-08T20:42:38.674332601Z","closed_at":"2026-01-08T20:42:38.674332601Z","close_reason":"Closed","labels":["phase:5-integration"],"dependencies":[{"issue_id":"st-sz0","depends_on_id":"st-6ul","type":"blocks","created_at":"2026-01-08T19:42:49.263212871Z","created_by":"dev"}]}
{"id":"st-ta2","title":"File watcher","description":"fsnotify integration. Watch .stash/*/records.jsonl and config.json. Debounce rapid changes (100ms). Auto-sync to SQLite on file changes.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:41:26.701814956Z","created_by":"dev","updated_at":"2026-01-08T21:17:11.332502313Z","closed_at":"2026-01-08T21:17:11.332502313Z","close_reason":"Closed","labels":["phase:6-daemon"],"dependencies":[{"issue_id":"st-ta2","depends_on_id":"st-85u","type":"blocks","created_at":"2026-01-08T19:42:51.817667937Z","created_by":"dev"}]}
{"id":"st-tne","title":"Column management","description":"Commands: column add (with --desc), column list (with stats), column describe, column rename, column drop. Case-insensitive matching. Reserved name validation.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:40:51.040409241Z","created_by":"dev","updated_at":"2026-01-08T20:45:27.439824236Z","closed_at":"2026-01-08T20:45:27.439824236Z","close_reason":"Closed","labels":["phase:3-schema-query"],"dependencies":[{"issue_id":"st-tne","depends_on_id":"st-w3r","type":"blocks","created_at":"2026-01-08T19:42:39.527624796Z","created_by":"dev"}],"comments":[{"id":1,"issue_id":"st-tne","author":"dev","text":"Implemented UC-COL-001 (Add Column), UC-COL-002 (List Columns), UC-COL-003 (Describe Column). All acceptance criteria tests pass. Remaining: UC-COL-004 (Rename Column), UC-COL-005 (Drop Column).","created_at":"2026-01-08T20:39:30Z"}]}
{"id":"st-tqz","title":"Feature: relationship management (parent/child records)","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-12T17:39:43.677805095Z","created_by":"dev","updated_at":"2026-01-12T17:39:43.677805095Z","comments":[{"id":14,"issue_id":"st-tqz","author":"dev","text":"**Source**: feedback/feedback.md\n\n**Use Case**: Company subsidiaries, product variations, account relationships\n\n**Proposed Solution**:\n```bash\nstash add \"Harmonic Inc\" --parent fpm-main-123\nstash show fpm-456 --with-children\nstash query \"SELECT * FROM fpm WHERE parent_id='fpm-456'\"\n```\n\n**Impact**: Enable hierarchical data modeling","created_at":"2026-01-12T17:40:12Z"}]}
{"id":"st-u2q","title":"Add stash upgrade command for version tracking and migrations","description":"Implement an upgrade system similar to beads for managing stash updates in projects.\n\n## Components\n\n### 1. Version Tracking (`stash upgrade status/review/ack`)\n- Track stash binary version in `.stash/metadata.json`\n- Show changelog since user's last acknowledged version\n- Alert when version changes\n\n### 2. Schema Migration (`stash migrate`)\n- Auto-detect schema version in SQLite database\n- Run migrations when schema changes\n- Support `--dry-run` and `--inspect` flags\n- Handle JSONL format changes\n\n### 3. Claude Integration Update (`stash init-claude --update`)\n- Smart merge of slash commands (don't overwrite user customizations)\n- Update CLAUDE.md section without duplicating\n- Show diff of what changed\n\n## Reference\nSee beads implementation:\n- `bd upgrade status/review/ack`\n- `bd migrate --dry-run --inspect`\n\n## Acceptance Criteria\n- [ ] `stash upgrade status` shows if version changed\n- [ ] `stash upgrade ack` records current version\n- [ ] `stash migrate` handles schema changes with dry-run\n- [ ] `stash init-claude --update` merges changes intelligently\n- [ ] Version stored in `.stash/metadata.json`","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-13T09:58:26.53225876Z","created_by":"dev","updated_at":"2026-01-13T10:01:48.55975064Z","labels":["feature"]}
{"id":"st-w3r","title":"Stash management commands","description":"Commands: init, drop, info, onboard, prime. Create .stash/ directory structure. config.json with schema. Daemon auto-start on init.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:40:41.421406093Z","created_by":"dev","updated_at":"2026-01-08T20:33:53.343477288Z","closed_at":"2026-01-08T20:33:53.343477288Z","close_reason":"Closed","labels":["phase:2-core-cli"],"dependencies":[{"issue_id":"st-w3r","depends_on_id":"st-qhm","type":"blocks","created_at":"2026-01-08T19:42:37.857174305Z","created_by":"dev"}]}
{"id":"st-yyh","title":"UCDD integration tests","description":"Tests for all 28 use cases: UC-ST-*, UC-REC-*, UC-COL-*, UC-QRY-*, UC-IMP-*, UC-SYN-*, UC-DMN-*. One test function per use case with AC subtests.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T19:41:50.140585597Z","created_by":"dev","updated_at":"2026-01-08T21:17:11.455159931Z","closed_at":"2026-01-08T21:17:11.455159931Z","close_reason":"Closed","labels":["phase:7-testing"],"dependencies":[{"issue_id":"st-yyh","depends_on_id":"st-4a4","type":"blocks","created_at":"2026-01-08T19:42:58.087907556Z","created_by":"dev"}]}
